<!DOCTYPE html>
<html>

<head>

	<link rel="stylesheet" href="../bootstrap-5.0.0-beta1-dist/bootstrap-5.0.0-beta1-dist/css/bootstrap.min.css">


	<script src="../bootstrap-5.0.0-beta1-dist/bootstrap-5.0.0-beta1-dist/js/bootstrap.min.js"></script>
</head>

<body class="container">
	<div id="choose_protocol" style="display: block;">
		<h1>Choose protocol</h1>
		<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
			<input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio1">SSH</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio2">SFTP</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio3">FTP</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio4">RDP</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio5" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio5">VNC</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio6" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio6">Radio 6</label>

			<input type="radio" class="btn-check" name="btnradio" id="btnradio7" autocomplete="off">
			<label class="btn btn-outline-primary" for="btnradio7">WSL</label>
		</div>
	</div>
	<!--
	<template id="BasicSettings">
		<div style="border-style: inset; background-color: whitesmoke;">
			Basic Settings
			<hr>

			<span style="color: red;">*</span>
			Remote host:
			<input type="text" title="Host name or IP address" name="remote_host">

			<input type="checkbox" onchange="onUsername()" name="username_checkbox">
			Specify username:
			<input type="text" title="Default is your username" name="username" disabled>

			<span style="color: red;">*</span>
			Port:
			<input type="number" min=1 max=65535 value="22" name="port">
		</div>
	</template>

	<template id="BookmarkSettings">
		<div style="border-style: inset; background-color: whitesmoke;">
			Bookmark Settings
			<hr>

			Session name:
			<input type="text" name="session_name" title="Give it a meaningful name.">
			<br>
			Description:
			<br>
			<textarea rows="4" cols="50" name="session_description"></textarea>
		</div>
	</template>
-->

	<div id="content" style="margin-top: 10px;">
		<div id="hidden_content_SSH" style="display: none;">
			<form onsubmit="onSubmit()">
				<div class="accordion">
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button" type="button" data-bs-toggle="collapse"
								data-bs-target="#BasicSettings" aria-expanded="true">
								Basic Settings
							</button>
						</h2>
						<div id="BasicSettings" class="accordion-collapse collapse show"
							data-bs-parent="#BasicSettings">
							<div class="accordion-body">
								<div class="list-group" id="list-tab" role="tablist">
									<div class="row">
										<div class="col">
											<label for="remote_host" class="form-label">
												<span style="color: red;">*</span>
												Remote host:
											</label>
										</div>
										<div class="col">
											<input type="text" class="form-control" id="remote_host"
												title="Host name or IP address" placeholder="Example: pi@raspberrypi"
												required>
										</div>
									</div>

									<div class="row">
										<div class="col">
											<label for="username" class="form-label">
												Username:
											</label>
										</div>
										<div class="col">
											<input type="text" class="form-control" id="username"
												title="Username to use" placeholder="Example: root">
										</div>
									</div>

									<div class="row">
										<div class="col">
											<label for="port" class="form-label">
												<span style="color: red;">*</span>
												Port:
											</label>
										</div>
										<div class="col">
											<input type="number" class="form-control" id="port" title="Port to use"
												value="22" required>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="accordion">
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button" type="button" data-bs-toggle="collapse"
								data-bs-target="#AdvancedSettings" aria-expanded="true">
								Advanced SSH Settings
							</button>
						</h2>
						<div id="AdvancedSettings" class="accordion-collapse collapse show"
							data-bs-parent="#AdvancedSettings">
							<div class="accordion-body">
								<div class="list-group" id="list-tab" role="tablist">
									<div class="row">
										<div class="col">
											<input class="form-check-input" type="checkbox" value="" id="x11_forwarding"
												checked />
											<label class="form-check-label" for="x11_forwarding">
												X11-Forwarding
											</label>
										</div>
										<div class="col">
											<input class="form-check-input" type="checkbox" value="" id="compression"
												checked />
											<label class="form-check-label" for="compression">
												Compression
											</label>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<br>
				<button type="submit" class="btn btn-primary">Submit</button>
				<a id="cancel" name="cancel" class="btn btn-outline-danger" onclick="cancel()">Cancel</a>

			</form>
		</div>

		<!--
		<div id="hidden_content_SFTP" style="display: none;">

		</div>


		<div id="hidden_content_Telnet" style="display: none;">
			<div>
				<script>
					var temp = document.getElementById("BasicSettings");
					var clon = temp.content.cloneNode(true);

					clon.getElementById("port").value = "23";

					/*
						<span style="color: red;">*</span>
					*/
					var span = document.createElement("span");
					span.style = "color: red;";
					span.innerText = "*";

					//Remove checkbox
					var toRemove = clon.getElementById("chkbx_username");
					toRemove.parentElement.removeChild(toRemove);

					//Append red star '*' to beginning
					var usernameSection = clon.getElementById("username_section");
					usernameSection.prepend(span);

					//Set text box active
					var txtbox = clon.getElementById("username");
					txtbox.disabled = null;

					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>

			<div>
				<script>
					var temp = document.getElementById("BookmarkSettings");
					var clon = temp.content.cloneNode(true);
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>
		</div>

		<div id="hidden_content_FTP" style="display: none;">
			<div>
				<script>
					var temp = document.getElementById("BasicSettings");
					var clon = temp.content.cloneNode(true);
					clon.getElementById("port").value = "21";
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>

			<div>
				<script>
					var temp = document.getElementById("BookmarkSettings");
					var clon = temp.content.cloneNode(true);
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>
		</div>

		<div id="hidden_content_RDP" style="display: none;">
			<div>
				<script>
					var temp = document.getElementById("BasicSettings");
					var clon = temp.content.cloneNode(true);
					clon.getElementById("port").value = "3389";
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>

			<div>
				<script>
					var temp = document.getElementById("BookmarkSettings");
					var clon = temp.content.cloneNode(true);
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>
		</div>

		<div id="hidden_content_VNC" style="display: none;">
			<div>
				<script>
					var temp = document.getElementById("BasicSettings");
					var clon = temp.content.cloneNode(true);

					clon.getElementById("port").value = "5900";

					var toRemove = clon.getElementById("username_section");
					toRemove.parentElement.removeChild(toRemove);

					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>

			<div>
				<script>
					var temp = document.getElementById("BookmarkSettings");
					var clon = temp.content.cloneNode(true);
					var thisScript = document.currentScript;
					thisScript.parentElement.appendChild(clon);
				</script>
			</div>
		</div>

		<div id="hidden_content_WSL" style="display: none;">
			Hidden content WSL!
		</div>
		-->
	</div>

</body>

<script>
	//window.api.loadscript("../js/new_session.js")
</script>

<script>
	var selected = null;
	var buttons = document.querySelectorAll('.btn_protocol');

	var selectedButton = null;

	buttons.forEach((button) => {
		button.addEventListener('click', (e) => {
			var mouseEvent = e;
			var buttonClicked = mouseEvent.target;
			var buttonId = buttonClicked.id;

			selectedButton = buttonClicked;

			//If chosen diffirent protocol
			if (buttonId != selected) {
				//If selected != null (i.e. some hidden content is already shown) then hide it again.
				if (selected) {
					//Hide previous content
					document.getElementById("hidden_content_" + selected).style.display = "none";
				}

				selected = buttonId;
				console.log("Selected protocol: " + selected)

				//Show hidden content for selected protocol
				document.getElementById("hidden_content_" + buttonId).style.display = "block";
			}
			//else do nothing, selected same button/protocol
		});
	});

	/*
	//Disable / enable text box when checkbox is toggled
	function on_chkbx_username() {
		var content = document.getElementById("hidden_content_" + selected);
		console.dir(content);
		var txtbox = content.getElementById("username");
		var chkbx = content.getElementById("chkbx_username");

		txtbox.disabled = ! chkbx.checked;
	}
	*/

	function cancel() {
		window.NewSession.closeWindow()
	}

	function submitForm() {
		console.log("Submit form")

		const form = document.getElementById("form")

		var json = {
			"protocol": selectedButton.id
		}
		for (var element of form) {
			var name = element["name"]
			var value = element["value"]

			//Value of checkbox is "on" always... idk maybe it's because I set it to checked initially.
			//TODO: Investiage why value of checkbox is "on" always, so we don't need this 'if'.
			if (element.type == "checkbox") {
				value = element.checked;
			}

			console.log("NAME: " + name + " VALUE: " + value)

			json[name] = value;
		}

		window.NewSession.saveSession(json)
		window.NewSession.closeWindow()
	}
</script>

</html>