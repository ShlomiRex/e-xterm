<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="../css/new_session.css">
</head>

<body>
	<div id="choose_protocol" style="display: block;">
		<h2>Choose protocol</h2>
		<div class="btn-group" style="width:100%">
			<button id="SSH" class="btn_protocol">SSH</button>
			<button id="SFTP" class="btn_protocol">SFTP</button>
			<button id="Telnet" class="btn_protocol">Telnet</button>
			<button id="FTP" class="btn_protocol">FTP</button>
			<button id="RDP" class="btn_protocol">RDP</button>
			<button id="VNC" class="btn_protocol">VNC</button>
			<button id="WSL" class="btn_protocol">WSL</button>
		</div>
	</div>

	<div id="content" style="size: 100px 100px; margin-top: 10px;">
		<div id="hidden_content_SSH" style="display: none;">
			<div style="border-style: inset; background-color: whitesmoke;">
				Basic Settings
				<hr>
				<br>
				<form action="" id="basic_settings">
					<span style="color: red;">*</span>Remote host:
					<input type="text" id="remote_host" title="Host name or IP address">

					<input type="checkbox" id="chkbx_username" onchange="on_chkbx_username()">
					Specify username:
					<input type="text" id="username" title="Default is your username" disabled>

					<span style="color: red;">*</span>Port:
					<input type="number" min=1 max=65535 value="22">
				</form>
			</div>

			<br>

			<div style="border-style: inset; background-color: whitesmoke;">
				Advanced Settings
				<hr>
				<br>
				<form action="" id="advanced_settings" style="">
					<span
						title="X11 forwarding allows executing a program remotly through SSH and the GUI will run locally.">
						<input type="checkbox" id="chkbx_x11_forwarding" checked> X11 Forwarding
					</span>
					<span title="Compression is useful when the connection speed is slow.">
						<input type="checkbox" id="chkbx_ssh_compression" checked> SSH Compression
					</span>
				</form>
			</div>

			<br>

			<div style="border-style: inset; background-color: whitesmoke;">
				Bookmark Settings
				<hr>
				<br>
				<form action="" id="bookmark_settings" style="">
					Session name:
					<input type="text" id="session_name" title="Give it a meaningful name.">
					<br>
					Description:
					<br>
					<textarea rows="4" cols="50" id="session_description"></textarea>
				</form>
			</div>

			<br>

			<div style="display: flex; align-items: center; justify-content: center;">
				<div>
					<button onclick="ok()">OK</button>
					<button onclick="cancel()">Cancel</button>
				</div>
			</div>
		</div>

		<div id="hidden_content_SFTP" style="display: none;">
			Hidden content SFTP!
		</div>

		<div id="hidden_content_Telnet" style="display: none;">
			Hidden content Telnet!
		</div>

		<div id="hidden_content_FTP" style="display: none;">
			Hidden content FTP!
		</div>

		<div id="hidden_content_RDP" style="display: none;">
			Hidden content RDP!
		</div>

		<div id="hidden_content_VNC" style="display: none;">
			Hidden content VNC!
		</div>

		<div id="hidden_content_WSL" style="display: none;">
			Hidden content WSL!
		</div>
	</div>

</body>

<script>
	//window.api.loadscript("../js/new_session.js")
</script>

<script>
	var selected = null;
	var buttons = document.querySelectorAll('.btn_protocol');
	buttons.forEach((button) => {
		button.addEventListener('click', (e) => {
			var mouseEvent = e;
			var buttonClicked = mouseEvent.target;
			var buttonId = buttonClicked.id;

			//If chosen diffirent protocol
			if (buttonId != selected) {
				//If selected != null (i.e. some hidden content is already shown) then hide it again.
				if (selected) {
					//Hide previous content
					document.getElementById("hidden_content_" + selected).style.display = "none";
				}

				selected = buttonId;

				//Show hidden content for selected protocol
				document.getElementById("hidden_content_" + buttonId).style.display = "block";

				//Hide protocol buttons
				//document.getElementById("choose_protocol").style.display = "none";
			}
			//else do nothing, selected same button/protocol
		});
	});

	function on_chkbx_username() {
		if (document.getElementById("chkbx_username").checked) {
			//Checked
			document.getElementById("username").disabled = false;
		} else {
			//Not checked
			document.getElementById("username").disabled = true;
		}

	}

	function ok() {
		console.log("ok clicked")

		window.NewSession.OK("{\"Key\":\"Value\"}")
	}

	function cancel() {
		console.log("cacnel clicked")

		window.NewSession.CANCEL()
	}
</script>

</html>